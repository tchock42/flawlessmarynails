(()=>{var t={216:()=>{document.addEventListener("DOMContentLoaded",(function(){let t=[];const e={id:"",nombre:"",idCarrito:""},o=document.querySelector("#carrito__items"),a=document.querySelector(".carrito__total__cantidad");if(o){!async function(){console.log("buscando usuario");const t=new FormData;t.append("nombre","JAcob");const e=await fetch("http://localhost:3000/api/cargar",{method:"POST",body:t}),o=await e.json();console.log(o)}();const s=JSON.parse(localStorage.getItem("carritoFMN"));t=s;const p=document.querySelectorAll(".producto__agregar"),u=document.getElementById("carrito__pagar");function n(o){const a={id:o.target.dataset.id,nombre:o.target.parentElement.querySelector(".producto__resumen").querySelector("H3").textContent.trim(),imagen:o.target.parentElement.querySelector("IMG").src,precio:o.target.parentElement.querySelector(".producto__resumen").querySelector("H4").querySelector("SPAN").textContent.trim()};if(t.find(t=>t.id===o.target.dataset.id))return void alert("El producto ya se encuentra en el carrito");t=[...t,a];const n=o.target;n.classList.add("selected"),n.innerText="Agregado al carrito",l(),d(),r(),fecha=new Date,fecha=fecha.getUTCFullYear()+"-"+("00"+(fecha.getUTCMonth()+1)).slice(-2)+"-"+("00"+fecha.getUTCDate()).slice(-2)+" "+("00"+fecha.getUTCHours()).slice(-2)+":"+("00"+fecha.getUTCMinutes()).slice(-2)+":"+("00"+fecha.getUTCSeconds()).slice(-2),async function(t){const o=new FormData;o.append("fecha",fecha),o.append("estado",0);const a=await fetch("http://localhost:3000/api/carrito",{method:"POST",body:o}),n=await a.json();e.idCarrito=n.id,console.log("Agregando articulo");const r=new FormData;r.append("id_carrito",e.idCarrito),r.append("id_producto",t.id),r.append("cantidad",1),r.append("precio_unitario",t.precio),r.append("subtotal",1*+t.precio),console.log([...r]);const c=await fetch("http://localhost:3000/api/producto",{method:"POST",body:r}),i=await c.json();console.log(i)}(a)}function r(){if(function(){for(;o.firstChild;)o.removeChild(o.firstChild),a.textContent="$0.00"}(),t.length>0)t.forEach(e=>{const n=document.createElement("DIV");n.classList.add("carrito__item");const d=document.createElement("IMG");d.classList.add("carrito__item__img"),d.src=e.imagen,productoDetalles=document.createElement("DIV"),productoDetalles.classList.add("carrito__item__detalles");const s=document.createElement("SPAN");s.classList.add("carrito__item__titulo"),s.textContent=e.nombre;const p=document.createElement("SPAN");p.classList.add("carrito__item__precio"),p.textContent=c(e.precio);const u=document.createElement("SPAN");u.classList.add("carrito__item__eliminar"),u.onclick=function(){!async function(e){t=t.filter(t=>t.id!==e);const o=document.querySelector(`[data-id = "${e}"]`);o.classList.remove("selected"),o.innerText="Agregar al Carrito",console.log("Eliminando producto");const a=new FormData;a.append("id_producto",e),console.log([...a]);const n=await fetch("http://localhost:3000/api/eliminar",{method:"POST",body:a}),c=await n.json();console.log(c),r(),i(),l()}(e.id)};const m=document.createElement("I");m.classList.add("fa-solid","fa-trash"),productoDetalles.appendChild(s),productoDetalles.appendChild(p),u.appendChild(m),n.appendChild(d),n.appendChild(productoDetalles),n.appendChild(u),o.appendChild(n),function(){const e=t.reduce((t,e)=>t+parseInt(e.precio),0);a.textContent=c(e)}()});else{const t=document.createElement("P");t.textContent="No hay elementos en tu Carrito",t.classList.add("carrito__item__empty"),o.appendChild(t)}}function c(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}function i(){if(0===t.length){var e=document.getElementById("carrito");e.style.marginRight="-100%",e.style.opacity="0",e.style.height="0",document.getElementById("tienda__listado").style.width="100%"}}function d(){if(t.length>0){var e=document.getElementById("carrito");e.style.marginRight="0",e.style.opacity="1",e.style.height="auto",document.getElementById("tienda__listado").style.width="100%"}}function l(){localStorage.setItem("carritoFMN",JSON.stringify(t))}p.forEach(t=>t.addEventListener("click",n)),0===t.length?i():(d(),r(),t.forEach(t=>{const e=document.querySelector(`[data-id = "${t.id}"]`);e.classList.add("selected"),e.innerText="Agregado al Carrito"})),u.addEventListener("click",(function(){t.map(t=>t.id),console.log("Pagando...")}))}}))},265:()=>{document.addEventListener("DOMContentLoaded",(function(){!function(){if(document.querySelector("#mapa")){const t=19.4923279,e=-99.0586138,o=16,a=L.map("mapa").setView([t,e],o);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(a),L.marker([t,e]).addTo(a).bindPopup('\n                <h2 class = "mapa__heading">Flawless Mary Nails</h2>\n                <p class = "mapa__texto">Nail Artist</p>\n            ').openPopup()}}()}))}},e={};function o(a){var n=e[a];if(void 0!==n)return n.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,o),r.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var a in e)o.o(e,a)&&!o.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";o(265),o(216)})()})();
//# sourceMappingURL=main.js.map
